<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¤©ç·šå¯¶å¯¶èªªä½ å¥½æŠ½çå›‰</title>
  <style>
      body {
          margin: 0;
          font-family: sans-serif;
          background-image: url('001.png');
          background-size: cover; /* åœ–ç‰‡æ”¾å¤§/ç¸®å°å¡«æ»¿æ•´å€‹å€åŸŸ */
          background-position: center; /* åœ–ç‰‡ç½®ä¸­ */
          background-repeat: no-repeat; /* ä¸é‡è¤‡å¹³é‹ª */
          background-attachment: fixed; /* èƒŒæ™¯å›ºå®šåœ¨ç•«é¢ä¸æ»¾å‹•ï¼ˆå¯é¸ï¼‰ */
          height: 100vh; /* ç¢ºä¿ body é«˜åº¦ç­‰æ–¼æ•´å€‹è¦–çª—é«˜åº¦ */
      }

      h1 {
          margin: 0 auto;
          color: #fff;
          text-align: center;
          text-shadow: 1px 1px 4px #000;
          font-size: 4vw;
      }

      h2 {
          margin: 0 auto;
          color: #fff;
          text-align: center;
          text-shadow: 1px 1px 4px #000;
          font-size: 2vw;
      }

      .main-container {
          display: flex;
          justify-content: center;
          align-items: flex-start;
          padding: 20px;
          position: relative;
          gap: 0;
          margin: 0 auto;
          flex-wrap: wrap;
          justify-content: center;
      }

      canvas {
          width: 28vw;
          /*max-width: 400px;*/
          height: auto;
          flex-shrink: 0;
          border-radius: 50%;
          box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
      }

      #history-container {
          width: 10vw;
          /*margin-right: 3vw;*/
      }


      #history-container h2 {
          margin-bottom: 8px;
          font-size: 2vw;
          text-align: center;
      }

      #history-list {
          list-style: none;
          padding: 0;
          margin: 0;
          border: 2px solid #ff5722;
          border-radius: 10px;
          background-color: rgba(0,0,0,0.5);
          overflow-y: auto;
      }

      #history-list li {
          padding: 6px 10px;
          border-bottom: 1px solid #ff5722;
          text-align: center;
      }

      #winner {
          width: 10vw;
          height: 55vh;
          /*          min-width: 150px;
          max-width: 200px;*/
          margin-top: 5vh;
          /*margin: 20px;*/
          /*margin-left: 3vw;*/
          font-size: 2.5vw;
          font-weight: bold;
          color: #fff;
          text-shadow: 1px 1px 4px #000;
          writing-mode: vertical-rl;
          text-align: center;
          white-space: pre-line;
          user-select: none;
          overflow-y: auto;
          flex-shrink: 0;
      }

      #startButton {
          display: block;
          margin: 0 auto;
          font-size: 2vw;
          padding: 10px 20px;
          font-weight: bold;
          border: none;
          border-radius: 10px;
          background-color: #FF5151;
          color: white;
          cursor: pointer;
          box-shadow: 2px 2px 5px #0006;
          user-select: none;
          transition: background-color 0.3s ease;
      }

    #startButton:disabled {
      background-color: #999 !important;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
        <h1>å¤©ç·šå¯¶å¯¶èªªä½ å¥½</h1>
        <h2>çµç¾©240å¤©ç´€å¿µæ—¥æŠ½ç</h2>
    <div class="main-container">
        <!-- å·¦é‚Šï¼šæ­·å²ä¸­çåå–®-->
        <div id="history-container">
            <!--<h2>æ­·å²å¾—çåå–®</h2>
            <ul id="history-list"></ul>-->
        </div>

        <!-- ä¸­é–“ï¼šè¼ªç›¤ -->
        <canvas id="wheelCanvas" width="500" height="500"></canvas>

        <!-- å³é‚Šï¼šæ­å–œä¸­ç -->
        <div id="winner">&nbsp;&nbsp;é»&nbsp;&nbsp;æ“Š&nbsp;&nbsp;é–‹&nbsp;&nbsp;å§‹ </div>
    </div>

    <button id="startButton">é–‹å§‹æŠ½ç</button>

    <script>
        let names = ["éŠ€ç‹", "å‡¡æ”¸", "æ–‘æ¯”", "ç‰ä»”", "å®¿æ·µ", "é¡ç„¡åŒ", "æœè”«ç„¶", "ç™½å¯å¯", "æœˆä¸éš¨", "å—ä»”"];

        const canvas = document.getElementById("wheelCanvas");
        const ctx = canvas.getContext("2d");
        const radius = canvas.width / 2;

        let currentAngle = 0;
        let spinning = false;
        let animationFrameId;

        const colors = [
            "#7DBBC3", "#DAEDBD", "#F4B9B2", "#e5b181",
            "#de6b48"
        ];

        const winnersHistory = [];

        function drawWheel() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const anglePerSlice = 2 * Math.PI / names.length;

            for (let i = 0; i < names.length; i++) {
                const start = currentAngle + i * anglePerSlice;
                const end = start + anglePerSlice;

                ctx.beginPath();
                ctx.moveTo(radius, radius);
                ctx.arc(radius, radius, radius - 10, start, end);
                ctx.fillStyle = colors[i % colors.length];
                ctx.fill();

                ctx.save();
                ctx.translate(radius, radius);
                ctx.rotate(start + anglePerSlice / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "24px sans-serif";
                ctx.fillText(names[i], radius - 20, 10);
                ctx.restore();
            }

            ctx.beginPath();
            ctx.arc(radius, radius, 30, 0, Math.PI * 2);
            ctx.fillStyle = "#fff";
            ctx.fill();

            ctx.beginPath();
            ctx.moveTo(radius, 30);            // å°–ç«¯æœä¸‹
            ctx.lineTo(radius - 15, 0);        // å·¦ä¸Šè§’
            ctx.lineTo(radius + 15, 0);        // å³ä¸Šè§’
            ctx.closePath();

            ctx.fillStyle = "#fff";
            ctx.shadowColor = "#000";
            ctx.shadowBlur = 6;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 2;
            ctx.fill();


        }

        let angularVelocity = 0;
        let angularAcceleration = 0;

        function animate() {
            if (!spinning) return;

            angularVelocity += angularAcceleration;

            if (angularVelocity <= 0.01) {
                stopWheel();
                return;
            }

            currentAngle += angularVelocity;
            currentAngle %= (2 * Math.PI);
            drawWheel();
            animationFrameId = requestAnimationFrame(animate);
        }

        function startSpin() {
            if (names.length < 2) {
                alert("åå–®æ•¸é‡ä¸è¶³ï¼Œç„¡æ³•æŠ½çï¼");
                return;
            }
            spinning = true;
            angularVelocity = (Math.random() * 0.1) + 0.2; // âœ… æ”¹æˆæ¯”è¼ƒæ…¢çš„åˆé€Ÿåº¦
            angularAcceleration = 0; // ä¸å…ˆæ¸›é€Ÿï¼Œè®“å®ƒæŒçºŒè½‰
            animate();
        }

        function stopWheel() {
            cancelAnimationFrame(animationFrameId);
            spinning = false;

            const anglePerSlice = 2 * Math.PI / names.length;

            const pointerAngle = (-Math.PI / 2 + 2 * Math.PI) % (2 * Math.PI);
            const totalAngle = (pointerAngle - currentAngle + 2 * Math.PI) % (2 * Math.PI);
            const index = Math.floor(totalAngle / anglePerSlice);

            const winner = names[index % names.length];

            const winnerHtml = `<span style="color: yellow">${winner}</span>`;
            document.getElementById("winner").innerHTML =
                `ğŸ‰æ­å–œ&nbsp;${winnerHtml}&nbsp;ä¸­çï¼`;

            names.splice(index % names.length, 1);
            winnersHistory.push(winner);
            updateHistory();;

            const btn = document.getElementById("startButton");
            if (names.length < 1) {
                btn.innerText = "æŠ½ççµæŸ";
                btn.disabled = true;
            } else {
                btn.innerText = "é–‹å§‹æŠ½ç";
                btn.disabled = false;
            }
        }

        function updateHistory() {
            const ul = document.getElementById("history-list");
            ul.innerHTML = "";
            winnersHistory.forEach(name => {
                const li = document.createElement("li");
                li.textContent = name;
                ul.appendChild(li);
            });
        }

        document.getElementById("startButton").addEventListener("click", () => {
            if (!spinning) {
                document.getElementById("winner").innerHTML = "&nbsp;&nbsp;é»&nbsp;&nbsp;æ“Š&nbsp;&nbsp;é–‹&nbsp;&nbsp;å§‹ ";
                startSpin();
                document.getElementById("startButton").innerText = "åœæ­¢æŠ½ç";
            } else {
                // ç¬¬äºŒæ¬¡é»æ“Šæ‰é–‹å§‹æ¸›é€Ÿ
                angularAcceleration = -0.005;
                document.getElementById("startButton").innerText = "ç­‰å¾…åœæ­¢";
            }
        });

        drawWheel();
    </script>

</body>
</html>
